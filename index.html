<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rizz System Dashboard</title>

<style>
body {
  background: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  padding: 20px;
}

h1 { font-size: 34px; }

input, button {
  padding: 12px;
  border-radius: 10px;
  border: none;
  margin: 5px 0;
  font-size: 16px;
}

button { background: #eee; }

.warning {
  background: orange;
  color: #000;
  padding: 12px;
  border-radius: 10px;
  margin: 15px 0;
  font-weight: bold;
}

.card {
  margin-top: 25px;
}

.progress {
  background: #333;
  border-radius: 10px;
  overflow: hidden;
  margin: 6px 0 12px;
}

.bar {
  height: 14px;
  background: #00ff99;
  width: 0%;
}

.badge {
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 12px;
  margin-left: 6px;
}

.ACTIVE { background: #555; }
.FOCUS { background: #00ff99; color: #000; }
.PAUSE { background: #ff5555; }

.controls button {
  margin: 4px;
}
</style>
</head>

<body>

<h1>üî• Rizz System Dashboard</h1>

<div id="warningBox"></div>

<input id="nameInput" placeholder="Enter name (e.g. Charity)">
<button onclick="addOrUpdate()">Add / Update</button>

<div id="list"></div>

<script>
let data = JSON.parse(localStorage.getItem("rizzData")) || [];

function save() {
  localStorage.setItem("rizzData", JSON.stringify(data));
}

function addOrUpdate() {
  const name = nameInput.value.trim();
  if (!name) return alert("Enter a name");

  let p = data.find(x => x.name === name);
  if (!p) {
    data.push({ name, score: 50, status: "ACTIVE" });
  }
  save();
  nameInput.value = "";
  render();
}

function adjust(name, val) {
  let p = data.find(x => x.name === name);
  p.score = Math.max(0, Math.min(100, p.score + val));
  save();
  render();
}

function setStatus(name, status) {
  if (status === "FOCUS") {
    data.forEach(p => p.status = "ACTIVE");
  }
  let p = data.find(x => x.name === name);
  p.status = status;
  save();
  render();
}

function del(name) {
  if (!confirm("Delete " + name + "?")) return;
  data = data.filter(p => p.name !== name);
  save();
  render();
}

/* üîÆ PREDICTION ENGINE */
function autoPredict() {
  let focused = data.find(p => p.status === "FOCUS");

  if (!focused && data.length) {
    let best = [...data].sort((a,b)=>b.score-a.score)[0];
    best.status = "FOCUS";
  }
}

function render() {
  autoPredict();

  let warningBox = document.getElementById("warningBox");
  let hasFocus = data.some(p => p.status === "FOCUS");

  warningBox.innerHTML = !hasFocus
    ? `<div class="warning">‚ÑπÔ∏è No one is Focus ‚Äî system auto-selected highest score</div>`
    : "";

  list.innerHTML = "";

  data
    .sort((a,b)=>b.score-a.score)
    .forEach(p => {
      list.innerHTML += `
      <div class="card">
        <strong>${p.name} ‚Äî ${p.score}%</strong>
        <span class="badge ${p.status}">${p.status}</span>

        <div class="progress">
          <div class="bar" style="width:${p.score}%"></div>
        </div>

        <div class="controls">
          <button onclick="adjust('${p.name}',-10)">-10</button>
          <button onclick="adjust('${p.name}',10)">+10</button>
          <button onclick="setStatus('${p.name}','FOCUS')">Focus</button>
          <button onclick="setStatus('${p.name}','PAUSE')">Pause</button>
          <button onclick="setStatus('${p.name}','ACTIVE')">Active</button>
          <button onclick="del('${p.name}')">Delete</button>
        </div>
      </div>
      `;
    });
}

render();
</script>

</body>
</html>